{"is_source_file": true, "format": "Python", "description": "This file implements the core trading logic, including decision making, risk management, and interaction with brokers within a trading system.", "external_files": ["src/config/settings", "src/db/models", "src.services.broker_interface", "src.services.broker_paper", "src.services.broker_zerodha", "src.services.risk_management"], "external_methods": ["settings.ZERODHA_API_KEY", "settings.ZERODHA_API_SECRET", "settings.ZERODHA_ACCESS_TOKEN", "settings.SYMBOLS", "settings.POSITION_SIZE", "db.query", "db.add", "db.commit", "db.refresh", "Trade created_at", "Trade pnl", "Trade id", "logger.info", "self.broker.place_order", "self.broker.get_profile", "self.broker.get_positions", "datetime.utcnow"], "published": ["run_trading_cycle", "status"], "classes": [{"name": "TradingService", "description": "Core class managing trading decisions, risk checks, and broker interactions."}], "methods": [{"name": "__init__(self)", "description": "Constructor that initializes broker based on available credentials and sets up risk management.", "scope": "TradingService", "scopeKind": "class"}, {"name": "float _get_daily_pnl(self, db: Session)", "description": "Calculates total profit and loss for the current day from trade records.", "scope": "TradingService", "scopeKind": "class"}, {"name": "dict run_trading_cycle(self, db: Session)", "description": "Executes a trading decision cycle including signal generation, risk assessment, order placement, and trade persistence.", "scope": "TradingService", "scopeKind": "class"}, {"name": "dict status(self)", "description": "Returns the current status of the broker connectivity and open positions.", "scope": "TradingService", "scopeKind": "class"}], "calls": ["self.broker.place_order", "db.query", "db.add", "db.commit", "db.refresh", "logger.info", "self.risk.can_place_order", "Trade()", "datetime.utcnow()", "self.broker.get_profile", "self.broker.get_positions"], "search-terms": ["TradingService", "run_trading_cycle", "risk management", "broker interaction", "daily pnl calculation", "trade execution", "Python trading bot"], "state": 2, "file_id": 16, "knowledge_revision": 36, "git_revision": "", "ctags": [{"_type": "tag", "name": "TradingService", "path": "/home/kavia/workspace/code-generation/autonomous-trading-bot-with-news-sentiment-analysis-217592-217603/trading_bot_backend/src/services/trading_service.py", "pattern": "/^class TradingService:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/autonomous-trading-bot-with-news-sentiment-analysis-217592-217603/trading_bot_backend/src/services/trading_service.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "TradingService", "scopeKind": "class"}, {"_type": "tag", "name": "_get_daily_pnl", "path": "/home/kavia/workspace/code-generation/autonomous-trading-bot-with-news-sentiment-analysis-217592-217603/trading_bot_backend/src/services/trading_service.py", "pattern": "/^    def _get_daily_pnl(self, db: Session) -> float:$/", "language": "Python", "typeref": "typename:float", "kind": "member", "signature": "(self, db: Session)", "scope": "TradingService", "scopeKind": "class"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/autonomous-trading-bot-with-news-sentiment-analysis-217592-217603/trading_bot_backend/src/services/trading_service.py", "pattern": "/^logger = logging.getLogger(\"trading_bot.trading\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "run_trading_cycle", "path": "/home/kavia/workspace/code-generation/autonomous-trading-bot-with-news-sentiment-analysis-217592-217603/trading_bot_backend/src/services/trading_service.py", "pattern": "/^    def run_trading_cycle(self, db: Session) -> dict:$/", "language": "Python", "typeref": "typename:dict", "kind": "member", "signature": "(self, db: Session)", "scope": "TradingService", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/autonomous-trading-bot-with-news-sentiment-analysis-217592-217603/trading_bot_backend/src/services/trading_service.py", "pattern": "/^    def status(self) -> dict:$/", "language": "Python", "typeref": "typename:dict", "kind": "member", "signature": "(self)", "scope": "TradingService", "scopeKind": "class"}], "hash": "01c04a157459eaa7a240f8a0a77528b6", "format-version": 4, "code-base-name": "trading_bot_backend", "filename": "trading_bot_backend/src/services/trading_service.py", "fields": [{"name": "logger = logging.getLogger(\"trading_bot.trading\")", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"36": ""}]}